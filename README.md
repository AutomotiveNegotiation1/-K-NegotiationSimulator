# 협력주행 시나리오 시뮬레이션

## 개요
SUMO 시뮬레이션 코드에서 제공하는 도로 네트워크, 차량 유형, 운전자 행동 모델 등과 함께 외부 프로세스와의 인터페이스인 TraCI를 이용해 새로운 주행 시뮬레이션 모듈과 기존 SUMO 시뮬레이션 모델 간의 협업을 통해 좀 더 다양한 V2X 환경을 시뮬레이션 할 수 있게 되었습니다.

### 협상 주행 시뮬레이션 구성
SUMO 기반 시뮬레이션은 아래 그림과 같이 세 부분으로 구성됩니다. 차량 주행 모델, 차선 전환 모델 등의 클래스를 보유한 SUMO 시뮬레이터, V2X 통신 환경과 협상 주행 시나리오를 만드는 Python 코드, Python 코드의 내부 상태 정보를 모니터링 하기 위한 앱입니다. SUMO 시뮬레이터와 Python 코드는 TraCI 인터페이스를 통해 정보를 공유합니다.

!(/image/simulation.png)


## 사용방법

### SUMO 설치 및 빌드

1. SUMO 공식 저장소에서 코드를 다운로드 및 빌드를 통해 SUMO를 사용할 준비를 마친다.
    https://github.com/eclipse-sumo/sumo.git

2. SUMO_HOME을 지정한다.
    `export SUMO_HOME=<SUMO_PATH>`

3. report2024 내부의 시뮬레이션을 진행할 시나리오 폴더로 이동한다.
4. sumo 시뮬레이션 환경 실행
    `~/report_2024/Roundabout_v2x$ sumo-gui -c sumocfg/Roundabout_D_8_1.sumocfg --remote-port 1337`
5. python 코드 실행
    `python Roundabout.py`




## 시뮬레이션 시나리오
시뮬레이션 시나리오는 5가지로 구성되어 있으며 각 시나리오에 대한 설명은 다음과 같다.
1. 경로 우회 시나리오
2. 직선로 긴급 차량 주행로 확보 시나리오
3. 회전 교차로 긴급 차량 주행로 확보 시나리오
4. 합류로 진입 차량 정보 제공 시나리오
5. 차량 대기시간에 따른 신호등 제어 시나리오

### 경로 우회 시나리오
경로 우회 시나리오에 대한 설명은 다음과 같다.
*편도 1차로 도로에서 선두의 차량이 주행 중 고장나 도로 위에서 정지한다.
*V2X를 통해 고장 소식을 전달받은 차량은 해당 차로에 진입 전 우회로로 진입해 주행한다.

!(/image/bypass.png)



### 직선로 긴급 차량 주행로 확보 시나리오

### 회전 교차로 긴급 차량 주행로 확보 시나리오


### 합류로 진입 차량 정보 제공 시나리오

### 차량 대기시간에 따른 신호등 제어 시나리오
